goog.provide('dda.c4k_gitea.gitea');
dda.c4k_gitea.gitea.domain_list_QMARK_ = (function dda$c4k_gitea$gitea$domain_list_QMARK_(input){
return ((clojure.string.blank_QMARK_(input)) || (dda.c4k_common.predicate.string_of_separated_by_QMARK_(dda.c4k_common.predicate.fqdn_string_QMARK_,/,/,input)));
});
cljs.spec.alpha.def_impl(new cljs.core.Keyword("dda.c4k-gitea.gitea","default-app-name","dda.c4k-gitea.gitea/default-app-name",1680274067),new cljs.core.Symbol("cljs.core","string?","cljs.core/string?",-2072921719,null),cljs.core.string_QMARK_);
cljs.spec.alpha.def_impl(new cljs.core.Keyword("dda.c4k-gitea.gitea","fqdn","dda.c4k-gitea.gitea/fqdn",1797078173),new cljs.core.Symbol("dda.c4k-common.predicate","fqdn-string?","dda.c4k-common.predicate/fqdn-string?",-423717834,null),dda.c4k_common.predicate.fqdn_string_QMARK_);
cljs.spec.alpha.def_impl(new cljs.core.Keyword("dda.c4k-gitea.gitea","mailer-from","dda.c4k-gitea.gitea/mailer-from",-1922018799),new cljs.core.Symbol("dda.c4k-common.predicate","bash-env-string?","dda.c4k-common.predicate/bash-env-string?",-1836972098,null),dda.c4k_common.predicate.bash_env_string_QMARK_);
cljs.spec.alpha.def_impl(new cljs.core.Keyword("dda.c4k-gitea.gitea","mailer-host-port","dda.c4k-gitea.gitea/mailer-host-port",119593858),new cljs.core.Symbol("dda.c4k-common.predicate","host-and-port-string?","dda.c4k-common.predicate/host-and-port-string?",-1914930078,null),dda.c4k_common.predicate.host_and_port_string_QMARK_);
cljs.spec.alpha.def_impl(new cljs.core.Keyword("dda.c4k-gitea.gitea","service-domain-whitelist","dda.c4k-gitea.gitea/service-domain-whitelist",1743936131),new cljs.core.Symbol("dda.c4k-gitea.gitea","domain-list?","dda.c4k-gitea.gitea/domain-list?",589619418,null),dda.c4k_gitea.gitea.domain_list_QMARK_);
cljs.spec.alpha.def_impl(new cljs.core.Keyword("dda.c4k-gitea.gitea","service-noreply-address","dda.c4k-gitea.gitea/service-noreply-address",1630815598),new cljs.core.Symbol("cljs.core","string?","cljs.core/string?",-2072921719,null),cljs.core.string_QMARK_);
cljs.spec.alpha.def_impl(new cljs.core.Keyword("dda.c4k-gitea.gitea","mailer-user","dda.c4k-gitea.gitea/mailer-user",325952486),new cljs.core.Symbol("dda.c4k-common.predicate","bash-env-string?","dda.c4k-common.predicate/bash-env-string?",-1836972098,null),dda.c4k_common.predicate.bash_env_string_QMARK_);
cljs.spec.alpha.def_impl(new cljs.core.Keyword("dda.c4k-gitea.gitea","mailer-pw","dda.c4k-gitea.gitea/mailer-pw",-939506015),new cljs.core.Symbol("dda.c4k-common.predicate","bash-env-string?","dda.c4k-common.predicate/bash-env-string?",-1836972098,null),dda.c4k_common.predicate.bash_env_string_QMARK_);
cljs.spec.alpha.def_impl(new cljs.core.Keyword("dda.c4k-gitea.gitea","issuer","dda.c4k-gitea.gitea/issuer",1277017636),new cljs.core.Symbol("dda.c4k-common.predicate","letsencrypt-issuer?","dda.c4k-common.predicate/letsencrypt-issuer?",1185597535,null),dda.c4k_common.predicate.letsencrypt_issuer_QMARK_);
cljs.spec.alpha.def_impl(new cljs.core.Keyword("dda.c4k-gitea.gitea","volume-total-storage-size","dda.c4k-gitea.gitea/volume-total-storage-size",-832787203),cljs.core.list(new cljs.core.Symbol("cljs.core","partial","cljs.core/partial",1483172485,null),new cljs.core.Symbol("dda.c4k-common.predicate","int-gt-n?","dda.c4k-common.predicate/int-gt-n?",1086947356,null),(5)),cljs.core.partial.cljs$core$IFn$_invoke$arity$2(dda.c4k_common.predicate.int_gt_n_QMARK_,(5)));
dda.c4k_gitea.gitea.config_defaults = new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"issuer","issuer",-1199257898),"staging"], null);
dda.c4k_gitea.gitea.config_QMARK_ = cljs.spec.alpha.map_spec_impl(cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"req-un","req-un",1074571008),new cljs.core.Keyword(null,"opt-un","opt-un",883442496),new cljs.core.Keyword(null,"gfn","gfn",791517474),new cljs.core.Keyword(null,"pred-exprs","pred-exprs",1792271395),new cljs.core.Keyword(null,"keys-pred","keys-pred",858984739),new cljs.core.Keyword(null,"opt-keys","opt-keys",1262688261),new cljs.core.Keyword(null,"req-specs","req-specs",553962313),new cljs.core.Keyword(null,"req","req",-326448303),new cljs.core.Keyword(null,"req-keys","req-keys",514319221),new cljs.core.Keyword(null,"opt-specs","opt-specs",-384905450),new cljs.core.Keyword(null,"pred-forms","pred-forms",172611832),new cljs.core.Keyword(null,"opt","opt",-794706369)],[new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("dda.c4k-gitea.gitea","fqdn","dda.c4k-gitea.gitea/fqdn",1797078173),new cljs.core.Keyword("dda.c4k-gitea.gitea","mailer-from","dda.c4k-gitea.gitea/mailer-from",-1922018799),new cljs.core.Keyword("dda.c4k-gitea.gitea","mailer-host-port","dda.c4k-gitea.gitea/mailer-host-port",119593858),new cljs.core.Keyword("dda.c4k-gitea.gitea","service-noreply-address","dda.c4k-gitea.gitea/service-noreply-address",1630815598)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("dda.c4k-gitea.gitea","issuer","dda.c4k-gitea.gitea/issuer",1277017636),new cljs.core.Keyword("dda.c4k-gitea.gitea","default-app-name","dda.c4k-gitea.gitea/default-app-name",1680274067),new cljs.core.Keyword("dda.c4k-gitea.gitea","service-domain-whitelist","dda.c4k-gitea.gitea/service-domain-whitelist",1743936131)], null),null,new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [(function (G__10337){
return cljs.core.map_QMARK_(G__10337);
}),(function (G__10337){
return cljs.core.contains_QMARK_(G__10337,new cljs.core.Keyword(null,"fqdn","fqdn",-494775377));
}),(function (G__10337){
return cljs.core.contains_QMARK_(G__10337,new cljs.core.Keyword(null,"mailer-from","mailer-from",46746467));
}),(function (G__10337){
return cljs.core.contains_QMARK_(G__10337,new cljs.core.Keyword(null,"mailer-host-port","mailer-host-port",1867879604));
}),(function (G__10337){
return cljs.core.contains_QMARK_(G__10337,new cljs.core.Keyword(null,"service-noreply-address","service-noreply-address",-205702396));
})], null),(function (G__10337){
return ((cljs.core.map_QMARK_(G__10337)) && (((cljs.core.contains_QMARK_(G__10337,new cljs.core.Keyword(null,"fqdn","fqdn",-494775377))) && (((cljs.core.contains_QMARK_(G__10337,new cljs.core.Keyword(null,"mailer-from","mailer-from",46746467))) && (((cljs.core.contains_QMARK_(G__10337,new cljs.core.Keyword(null,"mailer-host-port","mailer-host-port",1867879604))) && (cljs.core.contains_QMARK_(G__10337,new cljs.core.Keyword(null,"service-noreply-address","service-noreply-address",-205702396))))))))));
}),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"issuer","issuer",-1199257898),new cljs.core.Keyword(null,"default-app-name","default-app-name",460840317),new cljs.core.Keyword(null,"service-domain-whitelist","service-domain-whitelist",-547788367)], null),new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("dda.c4k-gitea.gitea","fqdn","dda.c4k-gitea.gitea/fqdn",1797078173),new cljs.core.Keyword("dda.c4k-gitea.gitea","mailer-from","dda.c4k-gitea.gitea/mailer-from",-1922018799),new cljs.core.Keyword("dda.c4k-gitea.gitea","mailer-host-port","dda.c4k-gitea.gitea/mailer-host-port",119593858),new cljs.core.Keyword("dda.c4k-gitea.gitea","service-noreply-address","dda.c4k-gitea.gitea/service-noreply-address",1630815598)], null),null,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"fqdn","fqdn",-494775377),new cljs.core.Keyword(null,"mailer-from","mailer-from",46746467),new cljs.core.Keyword(null,"mailer-host-port","mailer-host-port",1867879604),new cljs.core.Keyword(null,"service-noreply-address","service-noreply-address",-205702396)], null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("dda.c4k-gitea.gitea","issuer","dda.c4k-gitea.gitea/issuer",1277017636),new cljs.core.Keyword("dda.c4k-gitea.gitea","default-app-name","dda.c4k-gitea.gitea/default-app-name",1680274067),new cljs.core.Keyword("dda.c4k-gitea.gitea","service-domain-whitelist","dda.c4k-gitea.gitea/service-domain-whitelist",1743936131)], null),new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.list(new cljs.core.Symbol("cljs.core","fn","cljs.core/fn",-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"%","%",-950237169,null)], null),cljs.core.list(new cljs.core.Symbol("cljs.core","map?","cljs.core/map?",-1390345523,null),new cljs.core.Symbol(null,"%","%",-950237169,null))),cljs.core.list(new cljs.core.Symbol("cljs.core","fn","cljs.core/fn",-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"%","%",-950237169,null)], null),cljs.core.list(new cljs.core.Symbol("cljs.core","contains?","cljs.core/contains?",-976526835,null),new cljs.core.Symbol(null,"%","%",-950237169,null),new cljs.core.Keyword(null,"fqdn","fqdn",-494775377))),cljs.core.list(new cljs.core.Symbol("cljs.core","fn","cljs.core/fn",-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"%","%",-950237169,null)], null),cljs.core.list(new cljs.core.Symbol("cljs.core","contains?","cljs.core/contains?",-976526835,null),new cljs.core.Symbol(null,"%","%",-950237169,null),new cljs.core.Keyword(null,"mailer-from","mailer-from",46746467))),cljs.core.list(new cljs.core.Symbol("cljs.core","fn","cljs.core/fn",-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"%","%",-950237169,null)], null),cljs.core.list(new cljs.core.Symbol("cljs.core","contains?","cljs.core/contains?",-976526835,null),new cljs.core.Symbol(null,"%","%",-950237169,null),new cljs.core.Keyword(null,"mailer-host-port","mailer-host-port",1867879604))),cljs.core.list(new cljs.core.Symbol("cljs.core","fn","cljs.core/fn",-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"%","%",-950237169,null)], null),cljs.core.list(new cljs.core.Symbol("cljs.core","contains?","cljs.core/contains?",-976526835,null),new cljs.core.Symbol(null,"%","%",-950237169,null),new cljs.core.Keyword(null,"service-noreply-address","service-noreply-address",-205702396)))], null),null]));
dda.c4k_gitea.gitea.auth_QMARK_ = cljs.spec.alpha.map_spec_impl(cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"req-un","req-un",1074571008),new cljs.core.Keyword(null,"opt-un","opt-un",883442496),new cljs.core.Keyword(null,"gfn","gfn",791517474),new cljs.core.Keyword(null,"pred-exprs","pred-exprs",1792271395),new cljs.core.Keyword(null,"keys-pred","keys-pred",858984739),new cljs.core.Keyword(null,"opt-keys","opt-keys",1262688261),new cljs.core.Keyword(null,"req-specs","req-specs",553962313),new cljs.core.Keyword(null,"req","req",-326448303),new cljs.core.Keyword(null,"req-keys","req-keys",514319221),new cljs.core.Keyword(null,"opt-specs","opt-specs",-384905450),new cljs.core.Keyword(null,"pred-forms","pred-forms",172611832),new cljs.core.Keyword(null,"opt","opt",-794706369)],[new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("dda.c4k-common.postgres","postgres-db-user","dda.c4k-common.postgres/postgres-db-user",294546573),new cljs.core.Keyword("dda.c4k-common.postgres","postgres-db-password","dda.c4k-common.postgres/postgres-db-password",262988616),new cljs.core.Keyword("dda.c4k-gitea.gitea","mailer-user","dda.c4k-gitea.gitea/mailer-user",325952486),new cljs.core.Keyword("dda.c4k-gitea.gitea","mailer-pw","dda.c4k-gitea.gitea/mailer-pw",-939506015)], null),null,null,new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [(function (G__10353){
return cljs.core.map_QMARK_(G__10353);
}),(function (G__10353){
return cljs.core.contains_QMARK_(G__10353,new cljs.core.Keyword(null,"postgres-db-user","postgres-db-user",1981611945));
}),(function (G__10353){
return cljs.core.contains_QMARK_(G__10353,new cljs.core.Keyword(null,"postgres-db-password","postgres-db-password",-1958852060));
}),(function (G__10353){
return cljs.core.contains_QMARK_(G__10353,new cljs.core.Keyword(null,"mailer-user","mailer-user",1809094392));
}),(function (G__10353){
return cljs.core.contains_QMARK_(G__10353,new cljs.core.Keyword(null,"mailer-pw","mailer-pw",1068974003));
})], null),(function (G__10353){
return ((cljs.core.map_QMARK_(G__10353)) && (((cljs.core.contains_QMARK_(G__10353,new cljs.core.Keyword(null,"postgres-db-user","postgres-db-user",1981611945))) && (((cljs.core.contains_QMARK_(G__10353,new cljs.core.Keyword(null,"postgres-db-password","postgres-db-password",-1958852060))) && (((cljs.core.contains_QMARK_(G__10353,new cljs.core.Keyword(null,"mailer-user","mailer-user",1809094392))) && (cljs.core.contains_QMARK_(G__10353,new cljs.core.Keyword(null,"mailer-pw","mailer-pw",1068974003))))))))));
}),cljs.core.PersistentVector.EMPTY,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("dda.c4k-common.postgres","postgres-db-user","dda.c4k-common.postgres/postgres-db-user",294546573),new cljs.core.Keyword("dda.c4k-common.postgres","postgres-db-password","dda.c4k-common.postgres/postgres-db-password",262988616),new cljs.core.Keyword("dda.c4k-gitea.gitea","mailer-user","dda.c4k-gitea.gitea/mailer-user",325952486),new cljs.core.Keyword("dda.c4k-gitea.gitea","mailer-pw","dda.c4k-gitea.gitea/mailer-pw",-939506015)], null),null,new cljs.core.PersistentVector(null, 4, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"postgres-db-user","postgres-db-user",1981611945),new cljs.core.Keyword(null,"postgres-db-password","postgres-db-password",-1958852060),new cljs.core.Keyword(null,"mailer-user","mailer-user",1809094392),new cljs.core.Keyword(null,"mailer-pw","mailer-pw",1068974003)], null),cljs.core.PersistentVector.EMPTY,new cljs.core.PersistentVector(null, 5, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.list(new cljs.core.Symbol("cljs.core","fn","cljs.core/fn",-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"%","%",-950237169,null)], null),cljs.core.list(new cljs.core.Symbol("cljs.core","map?","cljs.core/map?",-1390345523,null),new cljs.core.Symbol(null,"%","%",-950237169,null))),cljs.core.list(new cljs.core.Symbol("cljs.core","fn","cljs.core/fn",-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"%","%",-950237169,null)], null),cljs.core.list(new cljs.core.Symbol("cljs.core","contains?","cljs.core/contains?",-976526835,null),new cljs.core.Symbol(null,"%","%",-950237169,null),new cljs.core.Keyword(null,"postgres-db-user","postgres-db-user",1981611945))),cljs.core.list(new cljs.core.Symbol("cljs.core","fn","cljs.core/fn",-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"%","%",-950237169,null)], null),cljs.core.list(new cljs.core.Symbol("cljs.core","contains?","cljs.core/contains?",-976526835,null),new cljs.core.Symbol(null,"%","%",-950237169,null),new cljs.core.Keyword(null,"postgres-db-password","postgres-db-password",-1958852060))),cljs.core.list(new cljs.core.Symbol("cljs.core","fn","cljs.core/fn",-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"%","%",-950237169,null)], null),cljs.core.list(new cljs.core.Symbol("cljs.core","contains?","cljs.core/contains?",-976526835,null),new cljs.core.Symbol(null,"%","%",-950237169,null),new cljs.core.Keyword(null,"mailer-user","mailer-user",1809094392))),cljs.core.list(new cljs.core.Symbol("cljs.core","fn","cljs.core/fn",-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"%","%",-950237169,null)], null),cljs.core.list(new cljs.core.Symbol("cljs.core","contains?","cljs.core/contains?",-976526835,null),new cljs.core.Symbol(null,"%","%",-950237169,null),new cljs.core.Keyword(null,"mailer-pw","mailer-pw",1068974003)))], null),null]));
dda.c4k_gitea.gitea.vol_QMARK_ = cljs.spec.alpha.map_spec_impl(cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"req-un","req-un",1074571008),new cljs.core.Keyword(null,"opt-un","opt-un",883442496),new cljs.core.Keyword(null,"gfn","gfn",791517474),new cljs.core.Keyword(null,"pred-exprs","pred-exprs",1792271395),new cljs.core.Keyword(null,"keys-pred","keys-pred",858984739),new cljs.core.Keyword(null,"opt-keys","opt-keys",1262688261),new cljs.core.Keyword(null,"req-specs","req-specs",553962313),new cljs.core.Keyword(null,"req","req",-326448303),new cljs.core.Keyword(null,"req-keys","req-keys",514319221),new cljs.core.Keyword(null,"opt-specs","opt-specs",-384905450),new cljs.core.Keyword(null,"pred-forms","pred-forms",172611832),new cljs.core.Keyword(null,"opt","opt",-794706369)],[new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("dda.c4k-gitea.gitea","volume-total-storage-size","dda.c4k-gitea.gitea/volume-total-storage-size",-832787203)], null),null,null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [(function (G__10367){
return cljs.core.map_QMARK_(G__10367);
}),(function (G__10367){
return cljs.core.contains_QMARK_(G__10367,new cljs.core.Keyword(null,"volume-total-storage-size","volume-total-storage-size",1173468179));
})], null),(function (G__10367){
return ((cljs.core.map_QMARK_(G__10367)) && (cljs.core.contains_QMARK_(G__10367,new cljs.core.Keyword(null,"volume-total-storage-size","volume-total-storage-size",1173468179))));
}),cljs.core.PersistentVector.EMPTY,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword("dda.c4k-gitea.gitea","volume-total-storage-size","dda.c4k-gitea.gitea/volume-total-storage-size",-832787203)], null),null,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"volume-total-storage-size","volume-total-storage-size",1173468179)], null),cljs.core.PersistentVector.EMPTY,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.list(new cljs.core.Symbol("cljs.core","fn","cljs.core/fn",-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"%","%",-950237169,null)], null),cljs.core.list(new cljs.core.Symbol("cljs.core","map?","cljs.core/map?",-1390345523,null),new cljs.core.Symbol(null,"%","%",-950237169,null))),cljs.core.list(new cljs.core.Symbol("cljs.core","fn","cljs.core/fn",-1065745098,null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"%","%",-950237169,null)], null),cljs.core.list(new cljs.core.Symbol("cljs.core","contains?","cljs.core/contains?",-976526835,null),new cljs.core.Symbol(null,"%","%",-950237169,null),new cljs.core.Keyword(null,"volume-total-storage-size","volume-total-storage-size",1173468179)))], null),null]));
dda.c4k_gitea.gitea.data_storage_by_volume_size = (function dda$c4k_gitea$gitea$data_storage_by_volume_size(total){
return total;
});
dda.c4k_common.yaml.load_resource.cljs$core$IMultiFn$_add_method$arity$3(null,new cljs.core.Keyword(null,"gitea","gitea",1802015356),(function (resource_name){
var G__10371 = resource_name;
switch (G__10371) {
case "gitea/appini-env-configmap.yaml":
return "apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: gitea-env\n  namespace: default\ndata:\n  #[admin]\n  GITEA__admin__DEFAULT_EMAIL_NOTIFICATIONS: \"enabled\" # Default configuration for email notifications for users (user configurable). Options: enabled, onmention, disabled\n\n  #[attachments]\n  GITEA__attachments__PATH: /data/gitea/attachments\n\n  #[database]\n  GITEA__database__DB_TYPE: \"postgres\"\n  GITEA__database__HOST: \"postgresql-service:5432\"\n  GITEA__database__NAME: gitea\n  GITEA__database__LOG_SQL: \"false\"\n  GITEA__database__SSL_MODE: disable\n  GITEA__database__CHARSET: utf8\n\n  #[DEFAULT]\n  APP_NAME: APPNAME\n  RUN_MODE: prod\n  RUN_USER: git\n\n  #[federation]\n  GITEA__federation__ENABLED: \"true\"\n  \n  #[indexer]\n  GITEA__indexer__ISSUE_INDEXER_PATH: /data/gitea/indexers/issues.bleve\n\n  #[log]\n  GITEA__log__MODE: \"console, file\"\n  GITEA__log__LEVEL: Info\n  GITEA__log__ROOT_PATH: /data/gitea/log\n\n  #[mailer]\n  GITEA__mailer__ENABLED: \"true\"\n  GITEA__mailer__FROM: FROM\n  GITEA__mailer__MAILER_TYPE: smtp+startls\n  # TODO: jem 2022-08-02: outdated with v1.18, use SMTP_ADDR & SMTP_PORT instead\n  GITEA__mailer__HOST: HOSTANDPORT  \n\n  #[oauth2]\n  GITEA__oauth2__ENABLE: \"true\"\n\n  #[openid]\n  GITEA__openid__ENABLE_OPENID: \"true\"\n  GITEA__openid__ENABLE_OPENID_SIGNIN: \"true\"\n  GITEA__openid__ENABLE_OPENID_SIGNUP: \"true\"\n\n  #[picture]\n  GITEA__picture__AVATAR_UPLOAD_PATH: /data/gitea/avatars\n  GITEA__picture__REPOSITORY_AVATAR_UPLOAD_PATH: /data/gitea/repo-avatars\n  GITEA__picture__DISABLE_GRAVATAR: \"false\"\n  GITEA__picture__ENABLE_FEDERATED_AVATAR: \"true\" # Enable support for federated avatars (see http://www.libravatar.org).\n\n  #[repository]\n  GITEA__repository__ROOT: /data/git/repositories\n  GITEA__repository__DEFAULT_PRIVATE: last\n  GITEA__repository__LOCAL_COPY_PATH: /data/gitea/tmp/local-repo\n  GITEA__repository__TEMP_PATH: /data/gitea/uploads    \n\n  #[security]\n  GITEA__security__INSTALL_LOCK: \"false\"\n\n  #[server]\n  GITEA__server__DOMAIN: FQDN\n  GITEA__server__SSH_DOMAIN: FQDN\n  GITEA__server__ROOT_URL: URL\n  GITEA__server__HTTP_PORT: \"3000\"    # HTTP listen port of the server (in the pod)\n  GITEA__server__SSH_PORT: \"2222\"     # SSH port displayed in clone URL\n\n  #[service]\n  GITEA__service__DISABLE_REGISTRATION: \"false\"  \n  GITEA__service__REQUIRE_SIGNIN_VIEW: \"false\"\n  GITEA__service__REGISTER_EMAIL_CONFIRM: \"true\"\n  GITEA__service__ENABLE_NOTIFY_MAIL: \"true\"\n  GITEA__service__EMAIL_DOMAIN_WHITELIST: WHITELISTDOMAINS \n  GITEA__service__ALLOW_ONLY_EXTERNAL_REGISTRATION: \"false\"\n  GITEA__service__ENABLE_BASIC_AUTHENTICATION: \"true\"\n  GITEA__service__ENABLE_CAPTCHA: \"false\"\n  GITEA__service__DEFAULT_KEEP_EMAIL_PRIVATE: \"true\"\n  GITEA__service__DEFAULT_ALLOW_CREATE_ORGANIZATION: \"true\"\n  GITEA__service__DEFAULT_ENABLE_TIMETRACKING: \"true\"\n  GITEA__service__NO_REPLY_ADDRESS: NOREPLY  \n\n  #[session]\n  GITEA__session__PROVIDER_CONFIG: /data/gitea/sessions\n  GITEA__session__PROVIDER: file\n";

break;
case "gitea/deployment.yaml":
return "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: gitea\n  namespace: default\n  labels:\n    app: gitea\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: gitea\n  template:\n    metadata:\n      name: gitea\n      labels:\n        app: gitea\n    spec:\n      containers:\n        - name: gitea\n          image: gitea/gitea:1.17.0\n          imagePullPolicy: IfNotPresent\n          # config settings\n          envFrom:\n            - configMapRef:\n                name: gitea-env\n            - secretRef:\n                name: gitea-secrets\n          volumeMounts:\n            - name: gitea-data-volume\n              mountPath: \"/data\"\n          ports:\n            - containerPort: 22\n              name: git-ssh\n            - containerPort: 3000\n              name: gitea\n      volumes:\n        - name: gitea-data-volume\n          persistentVolumeClaim:\n            claimName: gitea-data-pvc\n          \n";

break;
case "gitea/certificate.yaml":
return "apiVersion: cert-manager.io/v1\nkind: Certificate\nmetadata:\n  name: gitea-cert\n  namespace: default\nspec:\n  secretName: gitea-cert\n  commonName: FQDN\n  duration: 2160h # 90d\n  renewBefore: 360h # 15d\n  dnsNames:\n  - FQDN\n  issuerRef:\n    name: staging\n    kind: ClusterIssuer";

break;
case "gitea/ingress.yaml":
return "apiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n  name: ingress-gitea\n  namespace: default\n  annotations:\n    ingress.kubernetes.io/ssl-redirect: \"true\"\n    traefik.ingress.kubernetes.io/router.middlewares: default-redirect-https@kubernetescrd    \nspec:\n  tls:\n    - hosts:\n        - FQDN\n      secretName: gitea-cert\n  rules:\n    - host: FQDN\n      http:\n        paths:\n          - pathType: Prefix\n            path: \"/\"\n            backend:\n              service:\n                name: gitea-service\n                port:\n                  number: 3000\n";

break;
case "gitea/secrets.yaml":
return "apiVersion: v1\nkind: Secret\nmetadata:\n  name: gitea-secrets\ndata:\n    GITEA__database__USER: DBUSER\n    GITEA__database__PASSWD: DBPW\n    \n    GITEA__mailer__USER: MAILERUSER\n    GITEA__mailer__PASSWD: MAILERPW\n  ";

break;
case "gitea/service.yaml":
return "kind: Service\napiVersion: v1\nmetadata:\n  name: gitea-service\n  namespace: default\nspec:\n  selector:\n    app: gitea\n  ports:\n    - name: gitea-http\n      port: 3000\n\n";

break;
case "gitea/service-ssh.yaml":
return "kind: Service\napiVersion: v1\nmetadata:\n  name: gitea-ssh-service\n  namespace: default\n  annotations: \n    metallb.universe.tf/allow-shared-ip: \"shared-ip-service-group\"\nspec:\n  type: LoadBalancer\n  selector:\n    app: gitea\n  ports:\n    - port: 2222\n      targetPort: 22\n      protocol: TCP\n\n";

break;
case "gitea/datavolume.yaml":
return "apiVersion: v1\nkind: PersistentVolumeClaim\nmetadata:\n  name: gitea-data-pvc\n  namespace: default\n  labels:\n    app: gitea\nspec:\n  storageClassName: local-path\n  accessModes:\n    - ReadWriteOnce\n  resources:\n    requests:      \n      storage: DATASTORAGESIZE\n      ";

break;
default:
throw (new Error("Undefined Resource!"));

}
}));
dda.c4k_common.yaml.load_as_edn.cljs$core$IMultiFn$_add_method$arity$3(null,new cljs.core.Keyword(null,"gitea","gitea",1802015356),(function (resource_name){
return dda.c4k_common.yaml.from_string(dda.c4k_common.yaml.load_resource.cljs$core$IFn$_invoke$arity$1(resource_name));
}));
dda.c4k_gitea.gitea.generate_appini_env = (function dda$c4k_gitea$gitea$generate_appini_env(config){
var map__10382 = config;
var map__10382__$1 = cljs.core.__destructure_map(map__10382);
var default_app_name = cljs.core.get.cljs$core$IFn$_invoke$arity$3(map__10382__$1,new cljs.core.Keyword(null,"default-app-name","default-app-name",460840317),"Gitea instance");
var fqdn = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__10382__$1,new cljs.core.Keyword(null,"fqdn","fqdn",-494775377));
var mailer_from = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__10382__$1,new cljs.core.Keyword(null,"mailer-from","mailer-from",46746467));
var mailer_host_port = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__10382__$1,new cljs.core.Keyword(null,"mailer-host-port","mailer-host-port",1867879604));
var service_domain_whitelist = cljs.core.get.cljs$core$IFn$_invoke$arity$3(map__10382__$1,new cljs.core.Keyword(null,"service-domain-whitelist","service-domain-whitelist",-547788367),fqdn);
var service_noreply_address = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__10382__$1,new cljs.core.Keyword(null,"service-noreply-address","service-noreply-address",-205702396));
return dda.c4k_common.common.replace_all_matching_values_by_new_value(dda.c4k_common.common.replace_all_matching_values_by_new_value(dda.c4k_common.common.replace_all_matching_values_by_new_value(dda.c4k_common.common.replace_all_matching_values_by_new_value(dda.c4k_common.common.replace_all_matching_values_by_new_value(dda.c4k_common.common.replace_all_matching_values_by_new_value(dda.c4k_common.common.replace_all_matching_values_by_new_value(dda.c4k_common.yaml.load_as_edn.cljs$core$IFn$_invoke$arity$1("gitea/appini-env-configmap.yaml"),"APPNAME",default_app_name),"FQDN",fqdn),"URL",["https://",cljs.core.str.cljs$core$IFn$_invoke$arity$1(fqdn)].join('')),"FROM",mailer_from),"HOSTANDPORT",mailer_host_port),"WHITELISTDOMAINS",service_domain_whitelist),"NOREPLY",service_noreply_address);
});
dda.c4k_gitea.gitea.generate_secrets = (function dda$c4k_gitea$gitea$generate_secrets(auth){
var map__10386 = auth;
var map__10386__$1 = cljs.core.__destructure_map(map__10386);
var postgres_db_user = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__10386__$1,new cljs.core.Keyword(null,"postgres-db-user","postgres-db-user",1981611945));
var postgres_db_password = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__10386__$1,new cljs.core.Keyword(null,"postgres-db-password","postgres-db-password",-1958852060));
var mailer_user = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__10386__$1,new cljs.core.Keyword(null,"mailer-user","mailer-user",1809094392));
var mailer_pw = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__10386__$1,new cljs.core.Keyword(null,"mailer-pw","mailer-pw",1068974003));
return dda.c4k_common.common.replace_all_matching_values_by_new_value(dda.c4k_common.common.replace_all_matching_values_by_new_value(dda.c4k_common.common.replace_all_matching_values_by_new_value(dda.c4k_common.common.replace_all_matching_values_by_new_value(dda.c4k_common.yaml.load_as_edn.cljs$core$IFn$_invoke$arity$1("gitea/secrets.yaml"),"DBUSER",dda.c4k_common.base64.encode(postgres_db_user)),"DBPW",dda.c4k_common.base64.encode(postgres_db_password)),"MAILERUSER",dda.c4k_common.base64.encode(mailer_user)),"MAILERPW",dda.c4k_common.base64.encode(mailer_pw));
});
dda.c4k_gitea.gitea.generate_ingress = (function dda$c4k_gitea$gitea$generate_ingress(config){
var map__10390 = config;
var map__10390__$1 = cljs.core.__destructure_map(map__10390);
var fqdn = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__10390__$1,new cljs.core.Keyword(null,"fqdn","fqdn",-494775377));
return dda.c4k_common.common.replace_all_matching_values_by_new_value(dda.c4k_common.yaml.load_as_edn.cljs$core$IFn$_invoke$arity$1("gitea/ingress.yaml"),"FQDN",fqdn);
});
dda.c4k_gitea.gitea.generate_certificate = (function dda$c4k_gitea$gitea$generate_certificate(config){
var map__10396 = config;
var map__10396__$1 = cljs.core.__destructure_map(map__10396);
var fqdn = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__10396__$1,new cljs.core.Keyword(null,"fqdn","fqdn",-494775377));
var issuer = cljs.core.get.cljs$core$IFn$_invoke$arity$3(map__10396__$1,new cljs.core.Keyword(null,"issuer","issuer",-1199257898),"staging");
var letsencrypt_issuer = cljs.core.name(issuer);
return dda.c4k_common.common.replace_all_matching_values_by_new_value(cljs.core.assoc_in(dda.c4k_common.yaml.load_as_edn.cljs$core$IFn$_invoke$arity$1("gitea/certificate.yaml"),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"spec","spec",347520401),new cljs.core.Keyword(null,"issuerRef","issuerRef",1193777186),new cljs.core.Keyword(null,"name","name",1843675177)], null),letsencrypt_issuer),"FQDN",fqdn);
});
/**
 * 
 */
dda.c4k_gitea.gitea.generate_data_volume = (function dda$c4k_gitea$gitea$generate_data_volume(config){
var map__10400 = config;
var map__10400__$1 = cljs.core.__destructure_map(map__10400);
var volume_total_storage_size = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__10400__$1,new cljs.core.Keyword(null,"volume-total-storage-size","volume-total-storage-size",1173468179));
var data_storage_size = dda.c4k_gitea.gitea.data_storage_by_volume_size(volume_total_storage_size);
return dda.c4k_common.common.replace_all_matching_values_by_new_value(dda.c4k_common.yaml.load_as_edn.cljs$core$IFn$_invoke$arity$1("gitea/datavolume.yaml"),"DATASTORAGESIZE",[cljs.core.str.cljs$core$IFn$_invoke$arity$1(data_storage_size),"Gi"].join(''));
});

cljs.spec.alpha.def_impl(new cljs.core.Symbol("dda.c4k-gitea.gitea","generate-data-volume","dda.c4k-gitea.gitea/generate-data-volume",1193022814,null),cljs.core.list(new cljs.core.Symbol("cljs.spec.alpha","fspec","cljs.spec.alpha/fspec",-1289128341,null),new cljs.core.Keyword(null,"args","args",1315556576),cljs.core.list(new cljs.core.Symbol("cljs.spec.alpha","cat","cljs.spec.alpha/cat",-1471398329,null),new cljs.core.Keyword(null,"config","config",994861415),cljs.core.list(new cljs.core.Symbol("cljs.spec.alpha","spec","cljs.spec.alpha/spec",-707298191,null),new cljs.core.Symbol("dda.c4k-gitea.gitea","vol?","dda.c4k-gitea.gitea/vol?",-1755247454,null))),new cljs.core.Keyword(null,"fn","fn",-1175266204),null,new cljs.core.Keyword(null,"ret","ret",-468222814),new cljs.core.Symbol("dda.c4k-common.predicate","map-or-seq?","dda.c4k-common.predicate/map-or-seq?",-1443028642,null)),cljs.spec.alpha.fspec_impl(cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(cljs.core.list(new cljs.core.Symbol("cljs.spec.alpha","cat","cljs.spec.alpha/cat",-1471398329,null),new cljs.core.Keyword(null,"config","config",994861415),cljs.core.list(new cljs.core.Symbol("cljs.spec.alpha","spec","cljs.spec.alpha/spec",-707298191,null),new cljs.core.Symbol("dda.c4k-gitea.gitea","vol?","dda.c4k-gitea.gitea/vol?",-1755247454,null))),cljs.spec.alpha.cat_impl(new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"config","config",994861415)], null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(new cljs.core.Symbol("dda.c4k-gitea.gitea","vol?","dda.c4k-gitea.gitea/vol?",-1755247454,null),dda.c4k_gitea.gitea.vol_QMARK_,null,null)], null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [cljs.core.list(new cljs.core.Symbol("cljs.spec.alpha","spec","cljs.spec.alpha/spec",-707298191,null),new cljs.core.Symbol("dda.c4k-gitea.gitea","vol?","dda.c4k-gitea.gitea/vol?",-1755247454,null))], null)),null,null),cljs.core.list(new cljs.core.Symbol("cljs.spec.alpha","cat","cljs.spec.alpha/cat",-1471398329,null),new cljs.core.Keyword(null,"config","config",994861415),cljs.core.list(new cljs.core.Symbol("cljs.spec.alpha","spec","cljs.spec.alpha/spec",-707298191,null),new cljs.core.Symbol("dda.c4k-gitea.gitea","vol?","dda.c4k-gitea.gitea/vol?",-1755247454,null))),cljs.spec.alpha.spec_impl.cljs$core$IFn$_invoke$arity$4(new cljs.core.Symbol("dda.c4k-common.predicate","map-or-seq?","dda.c4k-common.predicate/map-or-seq?",-1443028642,null),dda.c4k_common.predicate.map_or_seq_QMARK_,null,null),new cljs.core.Symbol("dda.c4k-common.predicate","map-or-seq?","dda.c4k-common.predicate/map-or-seq?",-1443028642,null),null,null,null));
dda.c4k_gitea.gitea.generate_deployment = (function dda$c4k_gitea$gitea$generate_deployment(){
return dda.c4k_common.yaml.load_as_edn.cljs$core$IFn$_invoke$arity$1("gitea/deployment.yaml");
});
dda.c4k_gitea.gitea.generate_service = (function dda$c4k_gitea$gitea$generate_service(){
return dda.c4k_common.yaml.load_as_edn.cljs$core$IFn$_invoke$arity$1("gitea/service.yaml");
});
dda.c4k_gitea.gitea.generate_service_ssh = (function dda$c4k_gitea$gitea$generate_service_ssh(){
return dda.c4k_common.yaml.load_as_edn.cljs$core$IFn$_invoke$arity$1("gitea/service-ssh.yaml");
});

//# sourceMappingURL=dda.c4k_gitea.gitea.js.map
